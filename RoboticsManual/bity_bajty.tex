\section{Bity a~bajty}

\subsection{Desítková soustava a~dvojková soustava }

V~poèítaèi jsou všechna data uložena pouze v~podobì jednièek a~nul. A~proto se nám bude hodit, když se budeme aspoò trochu orientovat v~pøevodech mezi dvojkovou a~desítkovou soustavou.

\subsubsection{Desítková soustava}
V~\B{desítkové soustavì}\I{desítková soustava}\I{soustava!desítková} je základem èíslo deset. 

\D Pøíklad: èíslo 156 si mùžeme rozložit jako \verb@1*10^2 + 5*10^1 + 6*10^0@, pøitom
\verb@10^0=1, 10^1=10, 10^2=10*10=100, 10^3=10*10*10=1000@ atd ...,
takže naše èíslo potom vypadá takto: \verb@ 1*100 + 5*10 + 6*1 = 156@.

\subsubsection{Dvojková soustava}
Ve \B{dvojkové soustavì}\I{dvojková soustava}\I{soustava!dvojková} je základem èíslo dva. 

\D Pøíklad: èíslo \verb@11001010@ rozložíme na \\
\verb@1*2^7 + 1*2^6 + 0*2^5 + 0*2^4 + 1*2^3 + 0*2^2 + 1*2^1 + 0*2^0@, pøitom \\
\verb@2^0=1, 2^1=2, 2^2=2*2=4, 2^3=2*2*2=8, 2^4=2*2*2*2=16, 2^5=32@, \\
 atd..., proto naše èíslo má hodnotu: \\
\verb@1*128 + 1*64 + 0*32 + 0*16 + 1*8 + 0*4 + 1*2 + 0*1 = 202@.   

\subsubsection{Pøevod z~desítkové soustavy do dvojkové}
Jak na to, když chceme pøevádìt èíslo z~desítkové soustavy do dvojkové?

\D Napøíklad pøevedeme èíslo \verb@97@. \\ 
\noindent Nejprve je potøeba, abychom znali násobky èísla dva: \\ 
\verb@2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048@, atd... \\
Napíšeme jednièku. \\
\verb@1@ \\ 
Najdeme nejbližší nižší násobek dvou k~našemu èíslu, v~našem pøípadì je nejblíže \verb@64@.  Odeèteme si od \verb@97@ èíslo \verb@64@, \verb@97-64=33@. Odeèítali jsme èíslo \verb@64@, další v~poøadí je èíslo \verb@32@, je \verb@32@ obsaženo v~\verb@33@? Ano, proto napíšeme další jednièku. \\ 
\verb@11@ \\ 
Dále \verb@33-32=1@, další èíslo je \verb@16@, je \verb@16@ obsaženo v~\verb@1@? Ne, proto napíšeme nulu.
\verb@110@ \\ 
Další èíslo je \verb@8@, také není obsaženo v~\verb@1@, takže napíšeme nulu. \\ 
\verb@1100@ \\ 
Èísla \verb@4@ a~\verb@2@ také nejsou obsažena v~èísle \verb@1@, proto napíšeme nuly. \\
\verb@110000@ \\
A~nakonec, je èíslo jedna obsaženo v~èísle jedna? Ano, napíšeme jednièku.
Náš binární zápis èísla \verb@97@ vypadá takto:\verb@1100001@. 
Èísla v~binární soustavì by mìla mít poèet cifer rovno 8, 16, 32, podle toho s~kolika bitovými èísly poèítáme. V~našem pøípadì musíme doplnit jednu nulu. Pokud bychom poèítali s~16 bitovými èísly doplníme o 8 nul více. Nuly doplòujeme zleva. Zapamatujeme si to snadno v~desítkové soustavì se èíslo \verb@128@ také nezmìní pokud pøed nìj dáme nuly, \verb@000128@. Nuly navíc nebudeme psát v~desítkové soustavì, ale v~dvojkové nám to pomùže se lépe orientovat. Takže to bude vypadat:
\verb@01100001@ 
No a~to ještì není všechno. Aby mìlo èíslo správný tvar musí mít pøed èíslem uvedeno \verb@0b@(nula a~malé B), tím øíkáme v~jazyce C, že èíslo je v~(binární) dvojkové soustavì. 

Pozor: Èísla \verb@101@ a~\verb@0b101@ nejsou to samé!Je to jednoduché, pokud \verb@0b@ neuvedeme bude pøekladaè èíslo brát jakože je v~desítkové soustavì. Tj. \verb@101 =>@ èíslo sto jedna, \verb@0b101 =>@ èíslo pìt.

\D \B{Další pøíklad:}\\
Pøevedeme èíslo \verb@237@. \\ 
Nejbližší nižší èíslo je \verb@128@. \\ 
 \verb@1@  \\
\verb@237-128=109@ je èíslo \verb@64@ obsaženo v~èísle \verb@109@? ANO, další jednièka. \\
\verb@11@ \\ 
\verb@109-64=45@ je èíslo \verb@32@ obsaženo v~\verb@45@? ANO, jednièka. \\
\verb@111@  \\ 
\verb@45-32=13@ je \verb@16@ obsaženo v~èísle \verb@13@? NE, nula. \\ 
\verb@1110@  \\ 
je èíslo \verb@8@ obsaženo v~\verb@13@? ANO, jednièka. \\
\verb@11101@ \\ 
\verb@13-8=5@ je \verb@4@ obsaženo v~\verb@5@? ANO, jednièka. \\
\verb@111011@ \\ 
\verb@5-4=1@ je  obsažena v~\verb@1@? NE, nula. \\
\verb@1110110@ \\
je \verb@1@ obsažena v~\verb@1@? ANO, jednièka. \\
\verb@11101101@
Binární zápis èísla \verb@237@ vypadá takto:\verb@11101101@.

\subsubsection{Bity a~bajty}

Každá èíslice ve dvojkové soustavì reprezentuje jeden \B{bit}\I{bit} (nabývá hodnot \verb@0@ nebo \verb@1@). 

\D Osm bitù dohromady tvoøí \B{bajt}\I{bajt}. Nejnižší bit v~bajtu leží vpravo (tzv \B{nultý bit}\I{nultý bit}\I{bit!nultý}), další je nalevo od nìj (první bit), až do sedmého bitu, který je nejvíce vlevo.  

\subsubsection{Pøevod z~dvojkové soustavy do desítkové}

Vezmeme si napøíklad binární èíslo \verb@1011@. Oèíslujeme si pozice zprava doleva od nuly, tj.:
\begin{verbatim}
1 0 1 1
3 2 1 0
\end{verbatim}
Pohybujeme se v~dvojkové soustavì, tj. základ bude \verb@2@. Vezmeme nultou èíslici a~vynásobíme s~ní èíslo \verb@2^0@. 
Dostáváme \verb@1*2^0 = 1@.
Dále první èíslici vynásobíme èíslem \verb@2^1@, tj. \verb@1*2^1 = 2@.
Dále druhou èíslici vynásobíme èíslem \verb@2^2@, tj. \verb@0*2^2 = 0@.
A~to samé provedeme s~èíslicí na tøetí pozici: \verb@1*2^3 = 8@.
A~nyní èísla seèteme \verb@8 + 0 + 2 + 1 = 11@, takže binární èíslo \verb@1011@ pøevedené do desítkové soustavy je \verb@11@.

Pøíklad 2: Pøeveïte binární èíslo \verb@11101001@ do desítkové soustavy.\\
\verb@1*2^0 + 0*2^1 + 0*2^2 + 1*2^3 + 0*2^4 + 1*2^5 + 1*2^6 + 1*2^7@
To je: \\
\verb@1 + 0 + 0 + 8 + 0 + 32 + 64 + 128 = 233@
Binární èíslo \verb@11101001@ pøevedeno do desítkové soustavy je \verb@233@.

Pøíklad 3: Pøeveïte binární èíslo \verb@00010101@. \\
\verb@1*2^0 + 0*2^1 + 1*2^2 + 0*2^3 + 1*2^4 + 0*2^5 + 0*2^6 + 0*2^7@, samozøejmì èleny \verb@2^x@, které násobíme nulou budou nulové a~tudíž je mùžeme beztrestnì vynechat, tj. \\
\verb@1*2^0 + 1*2^2 + 1*2^4 = 1 + 4 + 16 = 21@
Binární èíslo \verb@00010101@ má v~desítkové soustavì hodnotu \verb@21@. 

\subsection{Bitové výrazy a~práce s~nimi}

Bitové operace se od logických operací (viz \ref{logika1}) liší tím, že se neaplikují na èíslo jako celek, ale bit po bitu, viz níže. 

My budeme potøebovat následující bitové operace: bitový souèet, bitový souèin, bitovou negaci, bitový posun doleva.

\subsubsection{Bitové operátory}
\verb@|@ bitový souèet \\
\verb@&@ bitový souèin \\
\verb@~@ bitová negace \\
\verb@^@ bitový exluzivní souèet \\
\verb@<<@ bitový posuv doleva \\
\verb@>>@ bitový posuv doprava \\ 

\subsubsection{Bitový souèet} Platí, že \verb@0|0=0, 0|1=1, 1|0=1, 1|1=1@, sèítají se vždy pouze bity, které leží pod sebou. Zkrátka pokud je aspoò jeden bit jedna, výsledek je také jedna. 

Pøíklad: máme dvì binární èísla \verb@00000100@ a~\verb@01100001@ a~chceme je bitovì seèíst. 

\D Když seèteme nulté bity zadaných èísel, dostamene 0|1=1. Pak provedeme bitový souèet i~pro první, druhé a~další bity.
Zapíšeme:
\verb@(0b00000100 | 0b01100001);@
Nebo pokud budeme mít èísla v~promìnných:
\begin{verbatim}
uint8_t a~= 0b00000100;
uint8_t b = 0b01100001;
uint8_t c;
c = (a|b);
\end{verbatim}
Do promìnné \verb@c@ se zapíše výsledná hodnota.

\begin{verbatim}
00000100 - první èíslo
01100001 - druhé èíslo
--------
01100101 - výsledek po bitovém logickém souètu 
\end{verbatim}

Výsledek: \verb@01100101@.

\subsubsection{Bitový souèin} 
Platí, že \verb@0&0=0, 0&1=0, 1&0=0, 1&1=1@, tady platí, že výsledek je jedna, pokud oba bity jsou jedna.
Pøíklad: bitový souèin èísel \verb@00110011@ a~\verb@01000001@
Zapíšeme:
\verb@(0b00110011 & 0b01000001);@
Nebo pokud budeme mít èísla v~promìnných:
\begin{verbatim}
uint8_t c = 0b00110011;
uint8_t d = 0b01000001;
uint8_t e;
e = (c&d);
\end{verbatim}
Výsledná hodnota se zapíše do promìnné \verb@e@.
\begin{verbatim}
00110011 - první èíslo
01000001 - druhé èíslo
--------
00000001 - výsledek bitového logického souèinu
\end{verbatim}

\subsubsection{Bitová negace}
Tam, kde byla jednièka, bude nula, a~kde byla nula, bude jednièka.
Pøíklad: znegujte èíslo \verb@00110101@
Zapíšeme:
\verb@~(0b00110101);@
Nebo pokud budeme mít èíslo v~promìnné:
\begin{verbatim}
uint8_t a~= 0b00110101;
uint8_t b;
b = ~a;
\end{verbatim}
Do promìnné \verb@b@ se zapíše výsledná hodnota.
\begin{verbatim}
00110101 - èíslo, které bude logicky znegováno
--------
11001010 - výsledek
\end{verbatim}


\subsubsection{Bitový exklusivní souèet}
Výsledkem exklusivního souèinu je pravda, pokud se hodnoty liší, tj. nejsou stejné. Takže platí \verb@0^0=0, 0^1=1, 1^0=1, 1^1=0@

Zapíšeme:
\verb@(0b00110011 ^ 0b01000001);@
Nebo pokud budeme mít èísla v~promìnných:
\begin{verbatim}
uint8_t c = 0b00110011;
uint8_t d = 0b01000001;
uint8_t e;
e = (c^d);
\end{verbatim}
Výsledná hodnota se zapíše do promìnné \verb@e@.
\begin{verbatim}
00110011 - první èíslo
01000001 - druhé èíslo
--------
01110010 - výsledek bitového exklusivního souètu
\end{verbatim}

\subsubsection{Bitový posun doleva} 
Vezmeme celé osmibitové èíslo a~posuneme ho o urèitý poèet míst doleva. Pøitom èísla vlevo zmizí a~na na uprázdnìné místo vpravo pøijdou vždy nuly.
Zapíšeme:
\verb@(0b01000101 << 3);@
Nebo pokud budeme mít èíslo v~promìnné:
\begin{verbatim}
uint8_t c = 0b01000101;
uint8_t d;
d = (c << 3);
\end{verbatim}
Do promìnné \verb@d@ se pøiøadí výsledek operace.
Pokud napøíklad už nebudeme potøebovat pùvodní hodnotu promìnné \verb@c@, lze to napsat i~takto:
\begin{verbatim}
uint8_t c = 0b01000101;
c = (c << 3);
\end{verbatim}
Hodnota v~promìnné \verb@c@ se nejprve posune o tøi pozice a~pak se výsledná pozice zapíše na stejnou pozici v~pamìti mikrokontroléru.

Pøíklad: proveïte bitový posun doleva o tøi s~èíslem \verb@00000101@

\begin{verbatim}
01000101
--------
10001010 - posun o jedno doleva 
00010100 - znovu o jedno doleva (celkem o dvì místa)
00101000 - celkový posun o tøi bity doleva 
\end{verbatim}

\subsubsection{Bitový posun doprava}
Bitový posun doprava je podobný jako operace bitový posun doleva, liší se jen ve smìru posunu, tj. posouvá se na opaènou stranu.
Pøíklad 1: Proveïte bitový posun doprava o tøi pozice s~binárním èíslem \verb@00000101@. Zapíšeme:
\verb@(0b00000101 >> 3);@
Výsledkem bude toto:
\begin{verbatim}
00000101
--------
00000010 - posun o jednu pozici doprava
00000001 - posun o druhou pozici
00000000 - posun o tøetí pozici
\end{verbatim}

Pøíklad 2: Proveïte bitový posun o dvì pozice doprava a~potom o tøi doleva s~binárním èíslem \verb@11110111@. Zapíšeme:
\verb@((0b11110111 >> 2) << 3);@
Výsledkem bude toto:
\begin{verbatim}
11110111
--------
00111101 - posun o dvì pozice doprava
11101000 - posun o tøi pozice doleva, toto je výsledek.
\end{verbatim}

Pøíklad 3: Ale co když zadám èíslo do promìnné v~desítkové soustavì, napøíklad \verb@189@ a~provedu bitový posun o dvì pozice doprava? Co dostanu? Dostanu snad \verb@1@? Ne, i~když jsme èíslo zadali v~desítkové soustavì, v~mikrokontroléru je stejnì uloženo jako jednièky a~nuly, takže èíslo musíme nejprve pøevést do dvojkové soustavy.
\verb@189 = 0b10111101@
A~teï posun o dvì pozice doprava:

\verb@00101111@ a~to je èíslo \verb@47@.
Takže \verb@47@ je výsledek bitového posunu èísla \verb@189@ o dvì pozice doprava.

Zapíšeme takto:
\begin{verbatim}
uint8_t a~= 189;
uint8_t b;
b = (a~>> 2);
\end{verbatim}
No a~výsledek(tj. èíslo \verb@47@ ) se uloží do promìnné \verb@b@.
